{% extends 'rango/base.html' %}
{% load bootstrap %}
{% block content %}
	 {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    {% if form.errors %}
        <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
        </p>
    {% endif %}
	<form class="form-horizontal" action="" method="post" enctype="multipart/form-data">
		{% csrf_token %}
        <div class="field">
            {{ form.title|bootstrap_horizontal }}
        </div>

        <div class="field">
            {{ form.author|bootstrap_horizontal }}
        </div>

        <div class="field">
            {{ form.pub|bootstrap_horizontal }}
        </div>

        <div class="field">
            {{ form.pub_date|bootstrap_horizontal }}
        </div>

        <div class="field">
            {{ form.url|bootstrap_horizontal }}
        </div>

        <div class="field">
            {{ form.isbn|bootstrap_horizontal }}
        </div>

        <div class="field">
            {{ form.lang|bootstrap_horizontal }}
        </div>

        <div class="field">
            {{ form.awards|bootstrap_horizontal }}
        </div>

        <div class="field">
            {{ form.summary|bootstrap_horizontal }}
        </div>

        <div class="field">
            {{ form.category|bootstrap_horizontal }}
        </div>

        <div class="field">
            <div>
            {{ form.local_img|bootstrap_horizontal }}
            </div>
            <div class="form-group">
                <div class="control-label col-sm-2 col-lg-2 "></div>
                <div class=" col-sm-10 col-lg-10 ">
                    <img id="preview" width="150"></img>
                </div>
            </div>
        </div>

        <div class="field">
            <div>
            {{ form.table_of_content|bootstrap_horizontal }}
            </div>
            <div class="form-group">
                <div class="control-label col-sm-2 col-lg-2 "></div>
                <div class=" col-sm-10 col-lg-10 ">
                    <img id="preview"></img>
                </div>
            </div>
        </div>

        <div class="field">
            <div>
            {{ form.abstract|bootstrap_horizontal }}
            </div>
            <div class="form-group">
                <div class="control-label col-sm-2 col-lg-2 "></div>
                <div class=" col-sm-10 col-lg-10 ">
                    <img id="preview"></img>
                </div>
            </div>
        </div>

        <div class="field">
            {{ form.img_url|bootstrap_horizontal }}
        </div>

		<div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
				<input type="submit" class="btn btn-primary" value="SAVE" />
			</div>
        </div>
	</form>
    <script>
    $("#id_local_img").change(function(){
        if(this.files && this.files[0]){
             var reader = new FileReader();
             reader.onload = function (e) {
            $('#preview').attr('src', e.target.result);
            }
            reader.readAsDataURL(this.files[0]);
        }
    });
    </script>
{% endblock %}


